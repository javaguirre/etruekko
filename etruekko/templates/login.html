{% extends "base.html" %}
{% load i18n %}

{% block subcontent %}

<p>
{% blocktrans %}
To login in etruekko you should have an account. If you don't have
one, you can request the creation to a community. In etruekko users must
be part of a community and only will be created by community administrators.
{% endblocktrans %}
</p>

<p>
{% trans "You can view the list of communities in:" %}
<a href="{% url groups %}">{% trans "Communities" %}</a>
</p>

{% if form.user_cache %}

<p class="tip">
{% blocktrans with username=form.user_cache.username %}
The user "{{ username }}" is not active yet, this user is waiting for
a community membership request to be part of etruekko.
{% endblocktrans %}
</p>

<ul>
{% for group in form.user_cache.get_profile.reqs %}
    <li><a href="{{ group.get_absolute_url }}">{{ group.name }}</a></li>
{% endfor %}
</ul>

{% else %}
    <form method="post" action="">
        {% csrf_token %}

        <table style="width: 50%">
        {{ form.as_table }}
        </table>

        <input type="submit" class="button blue" value="{% trans "Sing in" %}" />
        <input type="hidden" name="next" value="{{ next }}" />
    </form>
{% endif %}

{% endblock %}

